欢迎使用Rain PHP Framework(RPF)
================================================================================================
框架核心理念

框架整体是基于MVCA架构模式，之所以自创这样的模式，是为了更好的解放C即controller，让它真正只做好它的控制器功能,做到流程控制,把真正处理逻辑放在action中，让它可以互不干扰，不同的action加载不同的action操作类，让它们不必要加载程序用不到的代码，一定程度上提升性能。

几点误区澄清

1.构建框架本身并不是为了所谓的重复造轮子，更多考虑自我提升和实践。很多时候只有亲身尝试做过，才会发现自己的不足，才有可能不断的进行自我完善。发布框架本身也仅供学习参考，并未涉及其他层面的考量。

2.框架整体实现上或多或少参考了一些个人熟悉的框架模式，但绝非照抄照搬，总体而言是在借鉴的基础上做更多的自己认可的架构调整。个人并不觉得完全的自主创新是完美的方案，否则更像是重复的造轮子工程。能够把握细节，大同小异的基础上构建自己的创新点，不仅仅可以减少熟悉和使用框架的成本，更加减少不必要的探索和挖掘道路的成本。
框架流程映射

单入口映射，例如针对通常web网站，index.php前台入口/admin.php后台入口

所有项目入口文件都必须包含框架库中的ini.php文件，该文件内置定义大量的常量，以及相关的php的选项设置，然后ini.php文件末尾初始化kernel/Kernel类，调用start方法进行包括加载配置/加载语言包/加载用户自定义函数/初始化session/解析请求URL/项目目录检测，最终根据请求URL，初始化相应的controller/action类，然后调用controller的init方法以及action的init和run方法,整体框架引导结束，进入用户代码逻辑层。
框架提供常用函数说明

所有框架系统的函数库均在框架目录下的functions/core.func.php文件里面,针对V0.0.1版本的函数介绍如下

函数：getIp($num = false)

功能：获取用户客户端IP地址

参数：

$num 是否返回ip地址对应的整数值，为true返回ip2long的结果，否则返回ip字符串

返回： 根据$num的值不同，返回不同，为true返回ip2long的结果，否则返回ip字符串

===================================================================================================================================================================================

函数：setc($name, $value, $expire = null, $path = '/', $domain = null, $secure = false, $httponly = true)

功能：向客户端设置cookie

参数：

$name cookie名称

$value cookie值

$expire 过期时间，单位:秒

$path cookie路径

$domain cookie域名

$secure https的cookie模式

$httponly httponly默认true避免JS读取cookie

返回： 成功返回true，失败返回false

===================================================================================================================================================================================

函数：getc($name)

功能：获取客户端cookie

参数：

$name cookie名称

返回： 成功返回经过htmlspecialchars处理后的值，失败返回false

===================================================================================================================================================================================

函数：delc($name)

功能：删除客户端cookie

参数：

$name cookie名称

返回： 同setcookie

===================================================================================================================================================================================

函数：sendmail($to, $subject = '', $body = '')

功能：发送邮件,实现上基于第三方PHPMailer类,使用前必须先配置好相关常量，详见init.php里面的介绍

参数：

$to 邮件接收方email地址

$subject 邮件标题

$body 邮件内容，支持html

返回： 成功返回true，失败返回false

===================================================================================================================================================================================

函数：getpath($path, $p = true)

功能：用于文件绝对路径和URL绝对路径相互转换

参数：

$path 需要转换的路径

$p true返回url绝对路径，false返回文件绝对路径

返回： 返回转换好的字符串

===================================================================================================================================================================================

函数：rm($dir, $deleteRootToo = false)

功能：递归删除目录和文件

参数：

$dir 需要执行删除操作的目录地址

$deleteRootToo 为true删除当前指定目录自身，false只删除当前目录下子目录

返回： 成功返回true，失败返回false

===================================================================================================================================================================================

函数：safe()

功能：安全模式过滤函数，对$_REQUEST / $_POST / $_GET / $_COOKIE / $_SERVER的键值对进行尽可能的过滤，做到尽量的安全

参数：void

返回： void

===================================================================================================================================================================================

函数：send_http_status($code)

功能：根据传递的http状态头的返回值设在http信息

参数：

$code http头状态码

返回： void

===================================================================================================================================================================================

函数：get_word($str, $chinese = true)

功能：获取文本字符串

参数：

$str 待检测字符串

$chinese 是否支持中文字符

返回： 成功返回文本字符串，字符串非法时返回false

===================================================================================================================================================================================

函数：get_link($str, $chinese = true)

功能：获取链接字符串

参数：

$str 待检测字符串

$chinese 是否支持中文字符

返回： 成功返回字符串，字符串非法时返回false

===================================================================================================================================================================================

函数：check_code($name)

功能：检测验证码是否正确

参数：

$name 填写验证码input表单的name值

返回： 成功返回true，错误返回false

===================================================================================================================================================================================

函数：check_data($data, $type = 'post')

功能：检测post或get请求是否传递类所需的所有参数

参数：

$data 待检测的参数数组

$type 类型是post或get

返回： 成功返回true，错误返回false

===================================================================================================================================================================================

函数：read_dir($dir, $clean = true)

功能：递归读取返回指定目录下所有文件

参数：

$dir 待扫描的目录

$clean 该参数仅供函数内部使用，无需修改设置

返回： 成功返回一维数组array，失败返回false

===================================================================================================================================================================================

函数：import($file)

功能：包含文件，底层使用php的require_once，该函数只是做包含文件个数统计功能

参数：

$file 需要包含的文件

返回： 返回require_once的返回值

===================================================================================================================================================================================

函数：mkdirs($dir)

功能：递归创建目录

参数：

$dir 需要创建的目录名称

返回： 失败返回false

===================================================================================================================================================================================

函数：U($act, $param = null, $file = null, $domain = null)

功能：根据URL路由模式，生成特定模式下的URL地址

参数：

$act controller/action例如User/add

$param 一维数组，传递给URL的参数，传递参数的key=>value的键值对，可为空

$file 入口文件，不含.php扩展名，默认当前入口文件

$domain 网址，默认当前host网址

返回： 成功返回当前URL路由模式下的URL地址

===================================================================================================================================================================================
框架配置文件介绍说明

URL_MODEL:url模式，可选值URL_COMMON/URL_PATHINFO/URL_REWRITE/URL_COMPAT，默认值URL_COMPAT

LANG: 目前支持zh或en，默认值zh

M_NAME: 默认的model class的名称后缀，默认值Model

V_NAME: 默认的view template的文件扩展名，默认值.html

C_NAME: 默认的controller class的名称后缀，默认值Controller

A_NAME: 默认的action class的名称后缀，默认值Action

DB_DSN: DSN方式链接mysql配置，默认mysql:host=127.0.0.1;dbname=test;charset=utf8

DB_UN: mysql的用户名

DB_PW: mysql的密码

DB_PRE:表的前缀

MEM_HOST: memcache的host

MEM_PORT: memcache的端口

MEM_TIMEOUT: memcache的取值超时时间，通常无需修改

DB_CACHE_TYPE: 数据库数据缓存保存方式，m为内存保存即memcache，f是文件方式

DB_CACHE_EXPIRE: 数据库查询的缓存时间，默认缓存7200秒即2小时

ADMIN_APP_NAME: 后台管理模块的APP_NAME

SESSION_SAVE_TYPE: m值表示保存在memcache，f值表示session是文件保存方式
核心类库介绍

Action类

所有的Action都应该继承此类，下面所关于这个类大致方法介绍

success/error/timeout用来ajax返回提示信息和状态信息

checktoken用来检测token是否有效，避免CSRF攻击

run子类必须重写此方法

set设置key和value对的值，赋值到模板

display设置模板，默认模板名称同action名称

===================================================================================================================================================================================

Image类

getCode($width = 70, $height = 24, $len = 4)生成验证码

imageWaterMark用来地图像打水印，参数详见kernel/Image.class.php内置介绍

resize用来调整图像大小，resize($s_img, $d_img = null, $percent = 0.5)

===================================================================================================================================================================================

Mysql类

startTrans用来启动事务

getInstance静态方法，用来初始化mysql对象，您可以这么使用:$mysql = Mysql::getInstance();

commit用来提交事务

rollback用来回滚事务

getLastId如果存在自增ID，返回最后一次插入ID值

connect建立mysql链接

fetchOne($sql, $data = array())获取单条记录，无缓存，例如$data=array(':id' => $id);

fetchAll($sql, $data = array())获取全部记录，参数说明同上,无缓存

fetchOneCache($sql, $data = array(), $cache_type = null, $timeout = null)缓存模式读取单条记录

fetchAllCache($sql, $data = array(), $cache_type = null, $timeout = null)缓存模式读取全部记录

execute($sql, $data = array())执行除了SELECT以外的SQL操作,底层实现调用对应的query方法，只是简便方法参数

query($sql, $data = array(), $one = false, $cache_type = null, $timeout = null)执行任意SQL，参数说明见kernel/Mysql.class.php

free，释放mysql

===================================================================================================================================================================================

Cahe类

用户进行缓存操作的，支持memcache和file两种方式缓存，详见lib/core/Cache.class.php

===================================================================================================================================================================================

Page类

分页用的类，详见lib/core/Page.class.php

===================================================================================================================================================================================

Upload类

上传文件用的类，详见lib/core/Upload.class.php

===================================================================================================================================================================================
第三方类库

所有的第三方类库都在lib/vendor在V0.0.1版本中，只有email一个文件夹，用来支持发送邮件的功能，邮件发送例子代码已经在函数里面说明
